# WPlace Scraper Configuration
# Copy this file to .env and update with your values

# ==============================================================================
# REQUIRED SETTINGS
# ==============================================================================

# Backend API endpoint (without trailing slash)
# Example: https://backend.wplace.live/
API_ENDPOINT=https://backend.wplace.live/

# Path to the tiles endpoint on the API
# Each tile is accessed at: {API_ENDPOINT}{TILE_PATH}{x}/{y}.png
# Example: files/s0/tiles/
TILE_PATH=files/s0/tiles/

# ==============================================================================
# OPTIONAL SETTINGS
# ==============================================================================

# Rate limit in tiles per second (default: 1.8)
# This is the global rate limit shared across all workers
# Each worker's rate is calculated as: (rate_limit / worker_count) * proxy_count
RATE_LIMIT=1.8

# Zoom level for generated URLs (default: 15)
# Used when generating URLs to the center of tiles
ZOOM_LEVEL=15

# Template matching threshold (default: 0.25)
# Minimum match percentage (0.0 to 1.0) required to consider a tile a match
# Example: 0.25 = 25% match required
MATCH_THRESHOLD=0.25

# Number of fetch workers to spawn (default: auto-calculated)
# Auto-calculation: max(1, floor(cpu_threads * 0.25))
# Note: Worker count will never exceed proxy count
# Uncomment to set manually:
# WORKER_COUNT=4

# Number of match workers to spawn (default: auto-calculated)
# Auto-calculation: max(1, floor(cpu_threads * 0.25))
# These workers process fetched tiles and check for template matches
# More workers = faster tile processing, but higher CPU usage
# Uncomment to set manually:
# MATCH_WORKER_COUNT=4

# Cache TTL in milliseconds (default: 3600000 = 1 hour)
# How long cached tile entries remain valid before being re-fetched
# Examples:
#   3600000  = 1 hour
#   7200000  = 2 hours
#   1800000  = 30 minutes
CACHE_TTL_MS=3600000

CACHE_EXPIRE_ON_HOUR=false

# Tile selection mode (default: random)
# Options: random, consecutive
#   random: Select tiles randomly
#   consecutive: Select tiles sequentially (x 0-2047, then y 0-2047)
# Uncomment to set manually:
TILE_SELECTION_MODE=grid

# Immediate tile fetch (optional)
# If both X_TILE and Y_TILE are set, the scraper will fetch and process
# this specific tile immediately on startup, before workers are started
# Uncomment to set manually:
# X_TILE=100
# Y_TILE=200
